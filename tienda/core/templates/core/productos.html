{% extends 'core/base.html' %}
{% load static %}
{% load custom_filters %}

{% block content %}
<div class="container border border-dark p-4">
    <h2 class="text-center">Mantenedor de productos</h2>
    <div class="row">
        <div class="col-md-8">
            <form class="needs-validation" method="POST" enctype="multipart/form-data" id="formulario_productos" >
              {% csrf_token %}
                <div>
                    {{ form|as_bootstrap_form }}
                </div>
               
                <div class="row mt-3">
                    <div class="col">
                        <button type="submit" class="btn btn-primary" id="guardar">Guardar</button>
                        <button type="reset" class="btn btn-primary">Nuevo</button>
                        <a type="submit" class="btn btn-primary" href="{% url 'productos' 'eliminar' form.instance.id %}">Eliminar</a>
                    </div>
                </div>
                
            </form>
            
          </div>
          <div class="col-md-4 text-center">
            <img src="{% static 'core/img/sin-imagen.png' %}" alt="Descripción de la imagen" class="img-fluid">
        </div>
    </div>
</div>

 <div>
  {% for message in messages %}
    {{ message }}
  {% endfor %}
 </div>
<!--Tabla-->
<div class="container">
    <table class="table mt-4">
        <thead>
            <tr>
                <th>ID</th>
                <th>Categoria</th>
                <th>Nombre</th>
                <th>Descripción</th>
                <th>Precio</th>
                <th>%Desc Suscriptor</th>
                <th>%Desc Oferta</th>
                <th>imagen</th>
            </tr>
        </thead>
        <tbody>
          {% for producto in productos %}
              <tr>
                  <td>{{ producto.id }}</td>
                  <td>{{ producto.categoria}}</td>
                  <td>{{ producto.nombre}}</td>
                  <td>{{ producto.descripcion}}</td>
                  <td>{{ producto.precio}}</td>
                  <td>{{ producto.descuento_subscriptor}}</td>
                  <td>{{ producto.descuento_oferta}}</td>
                  <td>
                    <img height="75px" src="/media/{{producto.imagen}}"/>
                  </td>
              </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% block script %}
  <script src="{% static 'core/js/validador_productos.js' %}" type="text/javascript"></script>
{% endblock script %}

{% endblock content %}
